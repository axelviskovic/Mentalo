// Questions


let data = {
    "questions":[
        "Ceci est la première question du jeu, si vous tombez dessus tout le monde prend 4 pénalités",
        "Ceux qui n'ont pas le permis prennent 3 pénalités",
        "Plutôt football ou basket ? Votez en même temps, les minoritaires prennent 2 pénalités",
        "Le joueur le plus grand en taille distribue 4 pénalités",
        "Tu as fait caca aujourd'hui ? Prends 3 pénalités",
        "Ceux qui n'ont jamais embrassé quelqu'un du même sexe prennent 2 pénalités",
        "Si tu n'as jamais vomi à cause de l'alcool c'est bien mais tu prends 3 pénalités",
        "Ceux qui ont déjà conduit sous drogue/alcool prennent 2 pénalités bande de dangers",
        "Prends une pénalité pour chaque tatouage que tu as",
        "Les personnes qui ont déjà couché le premier soir prennent 3 pénalités",
        "Citez tous votre artiste préféré, ceux qui répondent la même chose peuvent distribuer 4 pénalités",
        "À tour de rôle citez une capitale, la personne qui répète ou ne trouve pas prend 3 pénalités",
        "Ceux qui n'ont pas continué les études après le bac prennent 2 pénalités",
        "Ceux qui sont ensemble en cours prennent 3 pénalités",
        "À tour de rôle citez le nom de la famille de votre voisin de droite, 2 pénalités en cas d'échec",
        "Plutôt Damso ou Ninho ? Votez et les minoritaires prennent 3 pénalités",
        "Si tu t'es déjà fait arrêter par la police prends 4 pénalités",
        "Si tu t'appelles Axel tu peux distribuer 6 pénalités :)",
        "Les personnes qui pourraient embrasser leur voisin de droite distribuent 4 pénalités",
        "Ceux qui ne sont jamais allés en concert prennent 3 pénalités",
        "Les fumeurs prennent 2 pénalités",
        "Le premier à dire le nom de la musique qui passe distribue 2 pénalités (sauf celui qui lit)",
        "À tour de rôle citez un personnage des Simpson, la personne qui répète ou ne trouve pas prend 3 pénalités",
        "Plutôt Rick et Morty ou Les Simpson ? Les minoritaires prennent 3 pénalités",
        "Ceux qui n'ont vu aucun Star Wars prennent 4 pénalités. Cheh",
        "Les gens célibataires prennent 2 pénalités",
        "Les personnes en couple prennent 3 pénalités",
        "Plutôt Mister V ou Jonathan Cohen ? Les minoritaires prennent 3 pénalités",
        "Plutôt partir en Italie ou en Espagne ? Les minoritaires prennent 3 pénalités",
        "La personne qui lit met une musique, la personne qui trouve le titre distribue 4 pénalités",
        "Plutôt vodka ou rhum ? Les minoritaires prennent 2 pénalités",
        "À tour de rôle citez un artiste d'ile de france, la personne qui ne trouve pas prend 3 pénalités",
        "À tour de rôle citez votre film préféré, ceux qui ont le même peuvent distribuer 2 pénalités chacun",
        "Si tu es venu en moto tu peux distribuer 2 pénalités",
        "Si tu es venu en voiture distribue 3 pénalités",
        "La personne qui organise la soirée distribue 5 pénalités",
        "Ceux qui savent faire l'équilibre distribuent 2 pénalités",
        "La première personne à enlever son t-shirt distribue 4 pénalités",
        "La première personne à envoyer un message à sa mère distribue 3 pénalités",
        "À tour de rôle faites un mime, la personne qui devine distribue 2 pénalités",
        "Si tu chausses en dessous de 42 tu prends 2 pénalités",
        "Si t'as déjà trompé tu prends 5 pénalités. Ordure.",
        "Si tu as déjà flirté avec quelqu'un ici prend 3 pénalités",
        "Ceux qui fument de la drogue prennent 3 pénalités",
        "Parc Astérix ou Disneyland ? Les minoritaires prennent 2 pénalités",
        "À tour de rôle citez un instrument de musique, la personne qui ne trouve pas prend 3 pénalités",
        "La personne qui a le plus petit score prend 3 pénalités",
        "La personne qui a le plus haut score distribue 3 pénalités à 2 personnes",
        "Si tu as un animal de compagnie donne son nom et prend 1 pénalité. Si tu en as au moins 2 Prends en 2",
        "Ceux qui sont nés avant 2000 prennent 2 pénalités",
        "Ceux qui connaissent la date de naissance d'au moins un de leurs voisins distribuent 3 pénalités",
        "Si tu as écouté Voyageur cette semaine tu es bg et tu distribues 3 pénalités",
        "Ceux qui ont un compte Twitter prennent 1 pénalité",
        "Ceux qui sont actifs sur TikTok prennent 2 pénalités",
        "Ceux qui postent du contenu sur Youtube ou Tiktok prennent 2 pénalités",
        "Ceux qui ont quitté la France cette année prennent 3 pénalités",
        "Si tu as déjà pris de la drogue dure prend 3 pénalités",
        "Si tu as peur en avion prend 2 pénalités",
        "Plutôt Rap fr ou Rap us ? Les minoritaires prennent 2 pénalités",
        "À tour de rôle citez une ville qui commence par une voyelle, la personne qui ne trouve pas prend 3 pénalités",
        "Si tu es percé tu peux distribuer 2 pénalités",
        "Si tu penses souvent à ton ex tu prends 2 pénalités",
        "Les détenteurs d'un skateboard prennent 3 pénaliés",
        "Ceux qui ont déjà fini en GAV prennent 3 pénalités",
        "Si tu connais la signification de BBC tu prends 2 pénalités",
        "À tour de rôle citez un chanteur décédé. La personne qui ne trouve pas prend 3 pénalités"

    ],
    "facile":[
        "Fais un bisou sur la joue de ton voisin de droite",
        "Raconte ce que tu as mangé à midi",
        "Qui était ton premier bisou",
        "Ferme les yeux pendant 1 minute",
        "Mets toi sur les genoux de la personne de ton choix",
        "Fais 3 pompes",
        "Chante une musique que les autres devront reconnaître",
        "Quel est ta destination de rêve ?",
        "Qui ici est le mieux habillé ?",
        "Avec qui partirais-tu en vacances ici ?"
    ],
    "moyen":[
        "Embrasse le cou de ton voisin de gauche",
        "Sens l'aisselle de la personne de ton choix",
        "Quand était ton dernier rappport sexuel ?",
        "Raconte nous une blague",
        "Laisse le joueur de ton choix te mettre une petite claque",
        "Mets toi pieds nus",
        "Mets toi sur les genoux de la personne de ton choix",
        "Combien as-tu eu de partenaires sexuels ?",
        "Quelle est la personne la plus attirante ici ?",
        "Tourne 10 fois sur toi-même et marche",
        "Imite un joueur présent",
        "Échange de haut avec le joueur de ton choix",
        "Qui ici est le plus sexy ?",
        "Jusqu'au prochain tour finis toutes tes phrases par : je suce"
    ],
    "difficile":[
        "Danse sans musique pendant 30 secondes",
        "Crie par la fenêtre",
        "Fais 20 pompes (sur les genoux si tu galères)",
        "Appelle quelqu'un de ton répertoire",
        "Enlève deux vêtements",
        "Bois un shot de grenadine",
        "Fais 30 squats",
        "Danse un slow avec la personne à ta droite",
        "Va au coin pendant la prochaine partie",
        "Dis nous avec qui ici tu pourrais sortir",
        "Raconte une anecdote gênante sur toi",
        "Raconte quelque chose que personne ici ne sait",
        "Ne fume pas jusqu'à la fin de la partie",
        "Envoie un message à ton crush",
        "Poste sur les réseaux une blague nulle",
        "Envoie à tes parents le mot : caca",
        "Quelle est la personne la moins attirante ici ?",
        "Jusqu'à la fin de la partie parle en chuchotant"
        
    ]
}


// COUNT BEER

const firstDot = document.querySelector('#firstDot')
const secondDot = document.querySelector('#secondDot')
const thirdDot = document.querySelector('#thirdDot')

let numberBeer = 1


firstDot.addEventListener(
    'click',
    ()=>{
        emptyBeer()
    }
)

function emptyBeer(){
    if(numberBeer==0){
        firstDot.src='images/beer.png'
        firstDot.classList.remove("whiteDotImg")
        firstDot.classList.add("beerImg")
        numberBeer = 1 
    }
    else if(numberBeer==1){
        firstDot.src='images/whiteDot.png'
        firstDot.classList.add("whiteDotImg")
        firstDot.classList.remove("beerImg")
        numberBeer = 0
    }
    else if(numberBeer>1){
        secondDot.src='images/whiteDot.png'
        secondDot.classList.add("whiteDotImg")
        secondDot.classList.remove("beerImg")
        thirdDot.src='images/whiteDot.png'
        thirdDot.classList.add("whiteDotImg")
        thirdDot.classList.remove("beerImg")
        numberBeer=1
    }
}

secondDot.addEventListener(
    'click',
    ()=>{
        if(numberBeer==0){
            firstDot.src='images/beer.png'
            firstDot.classList.remove("whiteDotImg")
            firstDot.classList.add("beerImg")
            secondDot.src='images/beer.png'
            secondDot.classList.remove("whiteDotImg")
            secondDot.classList.add("beerImg")
            numberBeer = 2 
        }
        else if(numberBeer==1){
            secondDot.src='images/beer.png'
            secondDot.classList.remove("whiteDotImg")
            secondDot.classList.add("beerImg")
            numberBeer = 2
        }
        else if(numberBeer==3){
            thirdDot.src='images/whiteDot.png'
            thirdDot.classList.add("whiteDotImg")
            thirdDot.classList.remove("beerImg")
            numberBeer=2
        }
    }
)

thirdDot.addEventListener(
    'click',
    ()=>{
        if(numberBeer==0){
            firstDot.src='images/beer.png'
            firstDot.classList.remove("whiteDotImg")
            firstDot.classList.add("beerImg")
            secondDot.src='images/beer.png'
            secondDot.classList.remove("whiteDotImg")
            secondDot.classList.add("beerImg")
            thirdDot.src='images/beer.png'
            thirdDot.classList.remove("whiteDotImg")
            thirdDot.classList.add("beerImg")
            numberBeer = 3 
        }
        else if(numberBeer==1){
            secondDot.src='images/beer.png'
            secondDot.classList.remove("whiteDotImg")
            secondDot.classList.add("beerImg")
            thirdDot.src='images/beer.png'
            thirdDot.classList.remove("whiteDotImg")
            thirdDot.classList.add("beerImg")
            numberBeer = 3
        }
        else if(numberBeer==2){
            thirdDot.src='images/beer.png'
            thirdDot.classList.remove("whiteDotImg")
            thirdDot.classList.add("beerImg")
            numberBeer=3
        }
    }
)


// CREATION LISTE JOUEURS

const buttonAddPlayer = document.querySelector('.buttonAddPlayer')
const inputAddPlayer = document.querySelector('.inputAddPlayer')
const containerlistPlayer = document.querySelector('.containerlistPlayer')
let listeJoueur= []

buttonAddPlayer.addEventListener(
    'click',
    ()=>{
        let joueur1 = new Joueur
        inputAddPlayer.value=""
        emptyBeer()
        listeJoueur.push(joueur1)
    }
)

class Joueur {
    constructor(nom, niveau, points) {
        this.nom = inputAddPlayer.value
        this.niveau = numberBeer
        this.points = 0
        
        

        let newDiv = document.createElement("div")
        newDiv.classList.add('rowPlayerList')

        let newPlayer = document.createElement("h2")
        newPlayer.classList.add('subTitlePlayer')
        newPlayer.innerText = this.nom

        let newLevel = document.createElement("img")
        newLevel.src = "images/level" + numberBeer + ".png"



        newDiv.appendChild(newPlayer)
        newDiv.appendChild(newLevel)
        containerlistPlayer.appendChild(newDiv)

    }
}

// Changer de page

const pagePlayerSelect = document.querySelector('.pagePlayerSelect')
const buttonValidationPlayer = document.querySelector('.buttonValidationPlayer')
const pageGame = document.querySelector('.pageGame')
const listeScoreGame = document.querySelector('.listeScoreGame')
const scoreJoueurs = document.querySelector('.scoreJoueurs')
const containerChangeScore = document.querySelector('.containerChangeScore')


buttonValidationPlayer.addEventListener(
    'click',
    ()=>{
        pagePlayerSelect.style.display="none"
        pageGame.style.display="flex"
        pageGame.style.opacity="1"
        displayJoueur()
        selectQuestion()
        changeScore()
    }
)

function displayJoueur(){
    for(let i=0; i<listeJoueur.length; i++){
        let addPlayerScore = document.createElement("div")
        addPlayerScore.classList.add('scoreJoueurs')
        addPlayerScore.innerText= listeJoueur[i].nom + " : " + listeJoueur[i].points +" points"
        listeScoreGame.appendChild(addPlayerScore)
    }
}

function changeScore(){
    for(let i=0;i<listeJoueur.length; i++){
       let changePlayerScore = document.createElement("div")
       changePlayerScore.classList.add('rowScorePlayer') 
       let changePlayerScoreName = document.createElement('h2')
       changePlayerScoreName.classList.add('subTitle')
       changePlayerScoreName.innerText= listeJoueur[i].nom
       let changePlayerScoreInput = document.createElement('input')
       changePlayerScoreInput.setAttribute("type", "number")
       changePlayerScoreInput.setAttribute("min", "0")
       changePlayerScoreInput.setAttribute("max", "10")
       changePlayerScoreInput.classList.add('selectValue')
       changePlayerScore.appendChild(changePlayerScoreName)
       changePlayerScore.appendChild(changePlayerScoreInput)
       containerChangeScore.appendChild(changePlayerScore)       
    }
}

// Séléction d'une question au hasard

const question = document.querySelector('.question')

function selectQuestion(){
    question.innerText = data["questions"][Math.floor(Math.random() * (data["questions"].length - 0))]
}

// Possiblité de relancer la question

const replayBtn = document.querySelector('#replay')

replayBtn.addEventListener(
    'click',
    ()=>{
        selectQuestion()
    }
)




// Affichage des résultats

const buttonSeeResult = document.querySelector('.buttonSeeResult')
const pageResults = document.querySelector('.pageResults')

buttonSeeResult.addEventListener(
    'click',
    ()=>{
        pageGame.style.display="none"
        pageResults.style.display="flex"
        pageResults.style.opacity="1"
        
    }
)


// Retour au jeu et Changement des scores

const buttonNextQuestion = document.querySelector('.buttonNextQuestion')
let tenpenalties = false

buttonNextQuestion.addEventListener(
    'click',
    ()=>{
        const selectValue = document.querySelectorAll('.selectValue')

        for(let i=0;i<listeJoueur.length; i++){
            listeJoueur[i].points=selectValue[i].value
            if(listeJoueur[i].points==10){
                tenpenalties=true
            }
        }
        if(tenpenalties==true){
            setChallenge()
            tenpenalties=false
        }
        else if(tenpenalties==false){
            pageResults.style.display="none"
            pageGame.style.display="flex"
            updateScore()
            selectQuestion()
        }

    }
)

function updateScore(){
    const scoreJoueursList = document.querySelectorAll('.scoreJoueurs')
    for(let i=0; i<scoreJoueursList.length; i++){
        scoreJoueursList[i].innerText= listeJoueur[i].nom + " : " + listeJoueur[i].points +" points"
    }
}

function setChallenge(){
    const pageChallenge = document.querySelector('.pageChallenge')
    pageResults.style.display="none"
    pageChallenge.style.display="flex"   
}

// CHANGER DE PERSONNE POUR LES CHALLENGES

const buttonNextPerson = document.querySelector('.buttonNextPerson')
let aquicestletour = 0

buttonNextPerson.addEventListener(
    'click',
    ()=>{
        if(aquicestletour==listeJoueur.length){
           aquicestletour=0
           nameJoueurChallenge.innerText="Alerte"
           const selectValue = document.querySelectorAll('.selectValue')
           for(let i=0; i<listeJoueur.length; i++){
                listeJoueur[i].points=0
                selectValue[i].value=0
           }
           updateScore()
           const pageChallenge = document.querySelector('.pageChallenge').style.display="none"
           pageGame.style.display="flex"
           const imgBiere = document.querySelector('.firstChallenge img').src="images/beer.png"
           const firstChallenge = document.querySelector('.firstChallenge h3').innerText="Gage boisson"
           const secondChallenge = document.querySelector('.secondChallenge h3').innerText="Gage action"
        }
        else{
            const nameJoueurChallenge = document.querySelector("#nameJoueurChallenge")
            nameJoueurChallenge.innerText=listeJoueur[aquicestletour].nom+" - "+listeJoueur[aquicestletour].points+" pts"

            let coeff = 1
            if(listeJoueur[aquicestletour].niveau==1){
                coeff=0.5
            }
            else if(listeJoueur[aquicestletour].niveau==3){
                coeff=1.5
            }

            // Si le jour est level 0, remplacer beer par action et mettre 2 actions du niveau de pénalités
            if(listeJoueur[aquicestletour].niveau==0){
                const imgBiere = document.querySelector('.firstChallenge img').src="images/challenge.png"
                const firstChallenge = document.querySelector('.firstChallenge h3')
                const secondChallenge = document.querySelector('.secondChallenge h3')
                if(listeJoueur[aquicestletour].points<4){
                    firstChallenge.innerText=data["facile"][Math.floor(Math.random() * (data["facile"].length - 0))]
                    secondChallenge.innerText=data["facile"][Math.floor(Math.random() * (data["facile"].length - 0))]
                }
                else if(listeJoueur[aquicestletour].points<8){
                    firstChallenge.innerText=data["moyen"][Math.floor(Math.random() * (data["moyen"].length - 0))]
                    secondChallenge.innerText=data["facile"][Math.floor(Math.random() * (data["facile"].length - 0))]
                }
                else if(listeJoueur[aquicestletour].points>7){
                    firstChallenge.innerText=data["difficile"][Math.floor(Math.random() * (data["difficile"].length - 0))]
                    secondChallenge.innerText=data["facile"][Math.floor(Math.random() * (data["facile"].length - 0))]
                }
            }
            else{
                const firstChallenge = document.querySelector('.firstChallenge h3')
                const secondChallenge = document.querySelector('.secondChallenge h3') 
                firstChallenge.innerText="Bois "+ Math.floor((listeJoueur[aquicestletour].points)*coeff) +" gorgées"
                if(listeJoueur[aquicestletour].points<4){
                    secondChallenge.innerText=data["facile"][Math.floor(Math.random() * (data["facile"].length - 0))]
                }
                else if(listeJoueur[aquicestletour].points<8){
                    secondChallenge.innerText=data["moyen"][Math.floor(Math.random() * (data["moyen"].length - 0))]
                }
                else if(listeJoueur[aquicestletour].points>7){
                    secondChallenge.innerText=data["difficile"][Math.floor(Math.random() * (data["difficile"].length - 0))]
                }
            }



            aquicestletour++
        }

    }
)

